---
import Layout from '../layouts/Layout.astro';

// Import configurations directly
import javaConfig from '../config/language-showdown/java.json';
import rubyConfig from '../config/language-showdown/ruby.json';
import goConfig from '../config/language-showdown/go.json';
import pythonConfig from '../config/language-showdown/python.json';
import rustConfig from '../config/language-showdown/rust.json';
import cppConfig from '../config/language-showdown/cpp.json';
import typescriptConfig from '../config/language-showdown/typescript.json';
import csharpConfig from '../config/language-showdown/csharp.json';
import sectionsConfig from '../config/language-showdown/sections.json';
import javaRubyComparisons from '../config/language-showdown/comparisons-java-ruby.json';
import javaGoComparisons from '../config/language-showdown/comparisons-java-go.json';
import javaPythonComparisons from '../config/language-showdown/comparisons-java-python.json';
import javaRustComparisons from '../config/language-showdown/comparisons-java-rust.json';
import javaCppComparisons from '../config/language-showdown/comparisons-java-cpp.json';
import rubyGoComparisons from '../config/language-showdown/comparisons-ruby-go.json';
import rubyPythonComparisons from '../config/language-showdown/comparisons-ruby-python.json';
import rubyRustComparisons from '../config/language-showdown/comparisons-ruby-rust.json';
import rubyCppComparisons from '../config/language-showdown/comparisons-ruby-cpp.json';
import goPythonComparisons from '../config/language-showdown/comparisons-go-python.json';
import goRustComparisons from '../config/language-showdown/comparisons-go-rust.json';
import goCppComparisons from '../config/language-showdown/comparisons-go-cpp.json';
import pythonRustComparisons from '../config/language-showdown/comparisons-python-rust.json';
import pythonCppComparisons from '../config/language-showdown/comparisons-python-cpp.json';
import pythonTypescriptComparisons from '../config/language-showdown/comparisons-python-typescript.json';
import rustCppComparisons from '../config/language-showdown/comparisons-rust-cpp.json';
import rustTypescriptComparisons from '../config/language-showdown/comparisons-rust-typescript.json';
import cppTypescriptComparisons from '../config/language-showdown/comparisons-cpp-typescript.json';
import javaTypescriptComparisons from '../config/language-showdown/comparisons-java-typescript.json';
import javaCsharpComparisons from '../config/language-showdown/comparisons-java-csharp.json';
import rubyTypescriptComparisons from '../config/language-showdown/comparisons-ruby-typescript.json';
import rubyCsharpComparisons from '../config/language-showdown/comparisons-ruby-csharp.json';
import goTypescriptComparisons from '../config/language-showdown/comparisons-go-typescript.json';
import goCsharpComparisons from '../config/language-showdown/comparisons-go-csharp.json';
import pythonCsharpComparisons from '../config/language-showdown/comparisons-python-csharp.json';
import rustCsharpComparisons from '../config/language-showdown/comparisons-rust-csharp.json';
import cppCsharpComparisons from '../config/language-showdown/comparisons-cpp-csharp.json';
import typescriptCsharpComparisons from '../config/language-showdown/comparisons-typescript-csharp.json';

// Available languages
const availableLanguages = [
  { id: 'java', name: javaConfig.name, color: javaConfig.color, icon: javaConfig.icon },
  { id: 'ruby', name: rubyConfig.name, color: rubyConfig.color, icon: rubyConfig.icon },
  { id: 'go', name: goConfig.name, color: goConfig.color, icon: goConfig.icon },
  { id: 'python', name: pythonConfig.name, color: pythonConfig.color, icon: pythonConfig.icon },
  { id: 'rust', name: rustConfig.name, color: rustConfig.color, icon: rustConfig.icon },
  { id: 'cpp', name: cppConfig.name, color: cppConfig.color, icon: cppConfig.icon },
  { id: 'typescript', name: typescriptConfig.name, color: typescriptConfig.color, icon: typescriptConfig.icon },
  { id: 'csharp', name: csharpConfig.name, color: csharpConfig.color, icon: csharpConfig.icon }
];

const allLanguages = {
  java: javaConfig,
  ruby: rubyConfig,
  go: goConfig,
  python: pythonConfig,
  rust: rustConfig,
  cpp: cppConfig,
  typescript: typescriptConfig,
  csharp: csharpConfig
};

// All comparison combinations
const allComparisons = {
  'java-ruby': javaRubyComparisons.comparisons,
  'ruby-java': javaRubyComparisons.comparisons,
  'java-go': javaGoComparisons.comparisons,
  'go-java': javaGoComparisons.comparisons,
  'java-python': javaPythonComparisons.comparisons,
  'python-java': javaPythonComparisons.comparisons,
  'java-rust': javaRustComparisons.comparisons,
  'rust-java': javaRustComparisons.comparisons,
  'java-cpp': javaCppComparisons.comparisons,
  'cpp-java': javaCppComparisons.comparisons,
  'ruby-go': rubyGoComparisons.comparisons,
  'go-ruby': rubyGoComparisons.comparisons,
  'ruby-python': rubyPythonComparisons.comparisons,
  'python-ruby': rubyPythonComparisons.comparisons,
  'ruby-rust': rubyRustComparisons.comparisons,
  'rust-ruby': rubyRustComparisons.comparisons,
  'ruby-cpp': rubyCppComparisons.comparisons,
  'cpp-ruby': rubyCppComparisons.comparisons,
  'go-python': goPythonComparisons.comparisons,
  'python-go': goPythonComparisons.comparisons,
  'go-rust': goRustComparisons.comparisons,
  'rust-go': goRustComparisons.comparisons,
  'go-cpp': goCppComparisons.comparisons,
  'cpp-go': goCppComparisons.comparisons,
  'python-rust': pythonRustComparisons.comparisons,
  'rust-python': pythonRustComparisons.comparisons,
  'python-cpp': pythonCppComparisons.comparisons,
  'cpp-python': pythonCppComparisons.comparisons,
  'python-typescript': pythonTypescriptComparisons.comparisons,
  'typescript-python': pythonTypescriptComparisons.comparisons,
  'rust-cpp': rustCppComparisons.comparisons,
  'cpp-rust': rustCppComparisons.comparisons,
  'rust-typescript': rustTypescriptComparisons.comparisons,
  'typescript-rust': rustTypescriptComparisons.comparisons,
  'cpp-typescript': cppTypescriptComparisons.comparisons,
  'typescript-cpp': cppTypescriptComparisons.comparisons,
  'java-typescript': javaTypescriptComparisons.comparisons,
  'typescript-java': javaTypescriptComparisons.comparisons,
  'java-csharp': javaCsharpComparisons.comparisons,
  'csharp-java': javaCsharpComparisons.comparisons,
  'ruby-typescript': rubyTypescriptComparisons.comparisons,
  'typescript-ruby': rubyTypescriptComparisons.comparisons,
  'ruby-csharp': rubyCsharpComparisons.comparisons,
  'csharp-ruby': rubyCsharpComparisons.comparisons,
  'go-typescript': goTypescriptComparisons.comparisons,
  'typescript-go': goTypescriptComparisons.comparisons,
  'go-csharp': goCsharpComparisons.comparisons,
  'csharp-go': goCsharpComparisons.comparisons,
  'python-csharp': pythonCsharpComparisons.comparisons,
  'csharp-python': pythonCsharpComparisons.comparisons,
  'rust-csharp': rustCsharpComparisons.comparisons,
  'csharp-rust': rustCsharpComparisons.comparisons,
  'cpp-csharp': cppCsharpComparisons.comparisons,
  'csharp-cpp': cppCsharpComparisons.comparisons,
  'typescript-csharp': typescriptCsharpComparisons.comparisons,
  'csharp-typescript': typescriptCsharpComparisons.comparisons
};

const sections = sectionsConfig.sections;

const pageTitle = 'Language Showdown';
const pageDescription = 'Interactive comparison of programming language patterns and idioms';
---

<Layout title={pageTitle} description={pageDescription}>
  <div id="showdown-wrapper" class="showdown-wrapper">
    <div id="showdown-container" class="container mx-auto px-4">
      <main class="language-showdown-container">
        <nav class="sidebar">
          <div class="sidebar-header">
            <h1>Language Showdown</h1>
            <div class="language-selectors">
          <select id="leftLang" class="language-select">
            {availableLanguages.map(lang => (
              <option value={lang.id} selected={lang.id === 'java'}>
                {lang.name}
              </option>
            ))}
          </select>
          <span class="vs">vs</span>
          <select id="rightLang" class="language-select">
            {availableLanguages.map(lang => (
              <option value={lang.id} selected={lang.id === 'ruby'}>
                {lang.name}
              </option>
            ))}
          </select>
        </div>
      </div>

      {sections.map((section) => (
        <div class="nav-section">
          <div class="nav-section-title">{section.category}</div>
          {section.items.map((item, index) => (
            <div 
              class={`nav-item ${section.category === 'Overview' && item.id === 'overview' ? 'active' : ''}`}
              data-section={item.id}
            >
              {item.title}
            </div>
          ))}
        </div>
      ))}
    </nav>

    <main class="main-content">
      <button id="maximize-btn" class="maximize-button" title="Toggle full width">
        <svg id="maximize-icon" class="icon-svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M8 3H5a2 2 0 00-2 2v3m18 0V5a2 2 0 00-2-2h-3m0 18h3a2 2 0 002-2v-3M3 16v3a2 2 0 002 2h3"/>
        </svg>
        <svg id="minimize-icon" class="icon-svg hidden" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M8 3v3a2 2 0 01-2 2H3m18 0h-3a2 2 0 01-2-2V3m0 18v-3a2 2 0 012-2h3M3 16h3a2 2 0 012 2v3"/>
        </svg>
      </button>
      <div id="main-content">
        <!-- Initial overview content rendered server-side -->
        <div class="overview-card">
        <h1 class="overview-title">
          <span style={`color: ${javaConfig.color};`}>{javaConfig.name}</span> vs <span style={`color: ${rubyConfig.color};`}>{rubyConfig.name}</span> - Language Overview
        </h1>
        
        {allComparisons['java-ruby']['overview'] && allComparisons['java-ruby']['overview'].summary && (
          <div class="overview-summary">
            <h3 style="font-size: 18px; font-weight: 600; margin: 0 0 16px 0;">📋 Overview</h3>
            <div style="display: flex; flex-direction: column; gap: 12px;">
              {allComparisons['java-ruby']['overview'].summary.split('.').map(sentence => {
                const trimmed = sentence.trim();
                return trimmed.length > 0 ? (
                  <p style="font-size: 15px; line-height: 1.7; margin: 0;">{trimmed}.</p>
                ) : null;
              })}
            </div>
          </div>
        )}
        
        <div class="languages-grid">
          <div class="language-overview">
            <div class="language-header" style={`border-bottom: 4px solid ${javaConfig.color};`}>
              <h2>{javaConfig.name}</h2>
            </div>
            
            <div class="overview-section" style="padding-bottom: 24px; border-bottom: 1px solid rgba(0,0,0,0.1);">
              <h3>📜 History</h3>
              <p>{javaConfig.history}</p>
            </div>
            
            <div class="overview-section" style="padding-bottom: 24px; border-bottom: 1px solid rgba(0,0,0,0.1);">
              <h3>⭐ Key Features</h3>
              <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px;">
                <ul style="margin: 0; padding-left: 20px;">
                  {javaConfig.keyFeatures.slice(0, Math.ceil(javaConfig.keyFeatures.length / 2)).map(feature => (
                    <li style="font-size: 13px; line-height: 1.8; margin-bottom: 6px;">{feature}</li>
                  ))}
                </ul>
                <ul style="margin: 0; padding-left: 20px;">
                  {javaConfig.keyFeatures.slice(Math.ceil(javaConfig.keyFeatures.length / 2)).map(feature => (
                    <li style="font-size: 13px; line-height: 1.8; margin-bottom: 6px;">{feature}</li>
                  ))}
                </ul>
              </div>
            </div>
            
            <div class="overview-section" style="padding-bottom: 24px; border-bottom: 1px solid rgba(0,0,0,0.1);">
              <h3>✅ Strengths</h3>
              <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px;">
                <ul class="pros-list" style="margin: 0; padding-left: 20px; list-style: none;">
                  {javaConfig.pros.slice(0, Math.ceil(javaConfig.pros.length / 2)).map(pro => (
                    <li style="font-size: 13px; line-height: 1.8; margin-bottom: 6px;">✓ {pro}</li>
                  ))}
                </ul>
                <ul class="pros-list" style="margin: 0; padding-left: 20px; list-style: none;">
                  {javaConfig.pros.slice(Math.ceil(javaConfig.pros.length / 2)).map(pro => (
                    <li style="font-size: 13px; line-height: 1.8; margin-bottom: 6px;">✓ {pro}</li>
                  ))}
                </ul>
              </div>
            </div>
            
            <div class="overview-section">
              <h3>⚠️ Considerations</h3>
              <ul class="cons-list">
                {javaConfig.cons.map(con => (
                  <li>{con}</li>
                ))}
              </ul>
            </div>
          </div>
          
          <div class="language-overview">
            <div class="language-header" style={`border-bottom: 4px solid ${rubyConfig.color};`}>
              <h2>{rubyConfig.name}</h2>
            </div>
            
            <div class="overview-section" style="padding-bottom: 24px; border-bottom: 1px solid rgba(0,0,0,0.1);">
              <h3>📜 History</h3>
              <p>{rubyConfig.history}</p>
            </div>
            
            <div class="overview-section" style="padding-bottom: 24px; border-bottom: 1px solid rgba(0,0,0,0.1);">
              <h3>⭐ Key Features</h3>
              <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px;">
                <ul style="margin: 0; padding-left: 20px;">
                  {rubyConfig.keyFeatures.slice(0, Math.ceil(rubyConfig.keyFeatures.length / 2)).map(feature => (
                    <li style="font-size: 13px; line-height: 1.8; margin-bottom: 6px;">{feature}</li>
                  ))}
                </ul>
                <ul style="margin: 0; padding-left: 20px;">
                  {rubyConfig.keyFeatures.slice(Math.ceil(rubyConfig.keyFeatures.length / 2)).map(feature => (
                    <li style="font-size: 13px; line-height: 1.8; margin-bottom: 6px;">{feature}</li>
                  ))}
                </ul>
              </div>
            </div>
            
            <div class="overview-section" style="padding-bottom: 24px; border-bottom: 1px solid rgba(0,0,0,0.1);">
              <h3>✅ Strengths</h3>
              <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px;">
                <ul class="pros-list" style="margin: 0; padding-left: 20px; list-style: none;">
                  {rubyConfig.pros.slice(0, Math.ceil(rubyConfig.pros.length / 2)).map(pro => (
                    <li style="font-size: 13px; line-height: 1.8; margin-bottom: 6px;">✓ {pro}</li>
                  ))}
                </ul>
                <ul class="pros-list" style="margin: 0; padding-left: 20px; list-style: none;">
                  {rubyConfig.pros.slice(Math.ceil(rubyConfig.pros.length / 2)).map(pro => (
                    <li style="font-size: 13px; line-height: 1.8; margin-bottom: 6px;">✓ {pro}</li>
                  ))}
                </ul>
              </div>
            </div>
            
            <div class="overview-section">
              <h3>⚠️ Considerations</h3>
              <ul class="cons-list">
                {rubyConfig.cons.map(con => (
                  <li>{con}</li>
                ))}
              </ul>
            </div>
          </div>
        </div>
        
        {allComparisons['java-ruby']['overview'] && (
          <div class="when-to-use-section">
            <h2>🤔 Which Should You Choose?</h2>
            <div class="when-to-use-grid">
              <div class="when-to-use-card" style={`border-left: 4px solid ${javaConfig.color};`}>
                <h3>Choose {javaConfig.name} When...</h3>
                <div style="display: flex; flex-direction: column; gap: 8px;">
                  {allComparisons['java-ruby']['overview'].whenToUseLeft?.split(',').map(point => {
                    const trimmed = point.trim();
                    return trimmed.length > 0 ? (
                      <div style="font-size: 14px; line-height: 1.6; padding-left: 16px; position: relative;">
                        <span style={`position: absolute; left: 0; color: ${javaConfig.color};`}>•</span>
                        {trimmed}
                      </div>
                    ) : null;
                  })}
                </div>
              </div>
              <div class="when-to-use-card" style={`border-left: 4px solid ${rubyConfig.color};`}>
                <h3>Choose {rubyConfig.name} When...</h3>
                <div style="display: flex; flex-direction: column; gap: 8px;">
                  {allComparisons['java-ruby']['overview'].whenToUseRight?.split(',').map(point => {
                    const trimmed = point.trim();
                    return trimmed.length > 0 ? (
                      <div style="font-size: 14px; line-height: 1.6; padding-left: 16px; position: relative;">
                        <span style={`position: absolute; left: 0; color: ${rubyConfig.color};`}>•</span>
                        {trimmed}
                      </div>
                    ) : null;
                  })}
                </div>
              </div>
            </div>
          </div>
        )}
      </div>
      </div>
    </main>
    </div>
  </div>

  <script define:vars={{ allLanguages, sections, allComparisons }}>
    // Store data globally for access
    window.languageData = {
      languages: allLanguages,
      sections: sections,
      allComparisons: allComparisons
    };

    let currentLeftLang = 'java';
    let currentRightLang = 'ruby';
    let currentSection = 'overview';

    function escapeHtml(text) {
      const div = document.createElement('div');
      div.textContent = text;
      return div.innerHTML;
    }

    function updatePageTitle(leftLang, rightLang, sectionId) {
      const leftConfig = getLanguageConfig(leftLang);
      const rightConfig = getLanguageConfig(rightLang);
      const sectionMetadata = getSectionMetadata(sectionId);
      const sectionTitle = sectionMetadata?.title || (sectionId === 'overview' ? 'Overview' : sectionId);
      document.title = `${leftConfig.name} vs ${rightConfig.name} - ${sectionTitle} - Language Showdown`;
    }

    function addToHistory(leftLang, rightLang, sectionId = currentSection) {
      const leftConfig = getLanguageConfig(leftLang);
      const rightConfig = getLanguageConfig(rightLang);
      const sectionMetadata = getSectionMetadata(sectionId);
      const sectionTitle = sectionMetadata?.title || (sectionId === 'overview' ? 'Overview' : sectionId);
      const timestamp = new Date().toLocaleString();
      const entry = `${timestamp} - Compared ${leftConfig.name} vs ${rightConfig.name} - ${sectionTitle}`;
      
      // Update page title
      updatePageTitle(leftLang, rightLang, sectionId);
      
      // Add to browser history state
      const url = new URL(window.location);
      url.searchParams.set('left', leftLang);
      url.searchParams.set('right', rightLang);
      url.searchParams.set('section', sectionId);
      window.history.pushState(
        { leftLang, rightLang, section: sectionId },
        '',
        url
      );
      
      console.log(entry);
    }

    function addSectionToHistory(sectionId) {
      // Update just the section in the URL and history
      updatePageTitle(currentLeftLang, currentRightLang, sectionId);
      
      const url = new URL(window.location);
      url.searchParams.set('section', sectionId);
      window.history.pushState(
        { leftLang: currentLeftLang, rightLang: currentRightLang, section: sectionId },
        '',
        url
      );
    }

    function getLanguageConfig(langId) {
      return window.languageData.languages[langId];
    }

    function getSectionMetadata(sectionId) {
      for (const section of window.languageData.sections) {
        const item = section.items.find(i => i.id === sectionId);
        if (item) return item;
      }
      return null;
    }

    function getComparison(sectionId, leftLang, rightLang) {
      const comparisonKey = `${leftLang}-${rightLang}`;
      const comparisons = window.languageData.allComparisons[comparisonKey];
      
      if (comparisons && comparisons[sectionId]) {
        return comparisons[sectionId];
      }
      
      return {
        why: 'Comparison information not available for this language pair.',
        keyPoints: []
      };
    }
    
    function renderOverview(leftLang, rightLang) {
      const leftConfig = getLanguageConfig(leftLang);
      const rightConfig = getLanguageConfig(rightLang);
      const comparison = getComparison('overview', leftLang, rightLang);
      
      // Canonical comparison file names (the actual files that exist)
      const canonicalComparisons = new Set([
        'java-ruby', 'java-go', 'java-python', 'java-rust', 'java-cpp', 'java-typescript', 'java-csharp',
        'ruby-go', 'ruby-python', 'ruby-rust', 'ruby-cpp', 'ruby-typescript', 'ruby-csharp',
        'go-python', 'go-rust', 'go-cpp', 'go-typescript', 'go-csharp',
        'python-rust', 'python-cpp', 'python-typescript', 'python-csharp',
        'rust-cpp', 'rust-typescript', 'rust-csharp',
        'cpp-typescript', 'cpp-csharp',
        'typescript-csharp'
      ]);
      
      // Check if we need to swap based on whether our current order matches the canonical file name
      const comparisonKey = `${leftLang}-${rightLang}`;
      const needsSwap = !canonicalComparisons.has(comparisonKey);
      
      const leftWhenToUse = needsSwap ? comparison.whenToUseRight : comparison.whenToUseLeft;
      const rightWhenToUse = needsSwap ? comparison.whenToUseLeft : comparison.whenToUseRight;
      
      const isDark = document.documentElement.classList.contains('dark');
      
      // Split summary into sentences for better readability
      const summarySentences = comparison?.summary
        ? comparison.summary.split('.').map(s => s.trim()).filter(s => s.length > 0)
        : [];
      
      // Split key features into smaller groups
      const splitFeatures = (features) => {
        const mid = Math.ceil(features.length / 2);
        return [features.slice(0, mid), features.slice(mid)];
      };
      
      const [leftFeaturesCol1, leftFeaturesCol2] = splitFeatures(leftConfig.keyFeatures);
      const [rightFeaturesCol1, rightFeaturesCol2] = splitFeatures(rightConfig.keyFeatures);
      
      // Split pros and cons for better layout
      const [leftProsCol1, leftProsCol2] = splitFeatures(leftConfig.pros);
      const [rightProsCol1, rightProsCol2] = splitFeatures(rightConfig.pros);
      
      return `
        <div class="overview-card" style="background: ${isDark ? 'rgb(17, 24, 39)' : 'white'}; border-radius: 12px; padding: 40px; margin-bottom: 32px; box-shadow: 0 2px 8px rgba(0,0,0,${isDark ? '0.3' : '0.08'});">
          <h1 class="overview-title" style="font-size: 32px; font-weight: 700; text-align: center; margin-bottom: 24px; color: ${isDark ? 'rgb(243, 244, 246)' : '#2c3e50'};">
            <span style="color: ${leftConfig.color};">${leftConfig.name}</span> vs <span style="color: ${rightConfig.color};">${rightConfig.name}</span> - Language Overview
          </h1>
          
          ${summarySentences.length > 0 ? `
            <div class="overview-summary" style="background: ${isDark ? 'rgba(59, 130, 246, 0.1)' : 'rgba(52, 152, 219, 0.05)'}; border-left: 4px solid ${isDark ? 'rgb(59, 130, 246)' : '#3498db'}; padding: 20px; margin-bottom: 32px; border-radius: 4px;">
              <h3 style="font-size: 18px; font-weight: 600; margin: 0 0 16px 0; color: ${isDark ? 'rgb(96, 165, 250)' : '#2980b9'};">📋 Overview</h3>
              <div style="display: flex; flex-direction: column; gap: 12px;">
                ${summarySentences.map(sentence => `<p style="font-size: 15px; line-height: 1.7; color: ${isDark ? 'rgb(209, 213, 219)' : '#34495e'}; margin: 0;">${sentence}.</p>`).join('')}
              </div>
            </div>
          ` : ''}
          
          <div class="languages-grid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 32px; margin-bottom: 32px;">
            <div class="language-overview" style="background: ${isDark ? 'rgb(31, 41, 55)' : '#f8f9fa'}; border-radius: 8px; padding: 24px;">
              <div class="language-header" style="text-align: center; padding-bottom: 16px; margin-bottom: 24px; border-bottom: 4px solid ${leftConfig.color};">
                <h2 style="font-size: 24px; font-weight: 700; color: ${isDark ? 'rgb(243, 244, 246)' : '#2c3e50'}; margin: 0;">${leftConfig.name}</h2>
              </div>
              
              <div class="overview-section" style="margin-bottom: 24px; padding-bottom: 24px; border-bottom: 1px solid ${isDark ? 'rgba(75, 85, 99, 0.5)' : 'rgba(0, 0, 0, 0.1)'};">
                <h3 style="font-size: 18px; font-weight: 600; margin-bottom: 12px; color: ${isDark ? 'rgb(243, 244, 246)' : '#2c3e50'};">📜 History</h3>
                <p style="font-size: 14px; line-height: 1.7; color: ${isDark ? 'rgb(209, 213, 219)' : '#34495e'}; margin: 0;">${leftConfig.history}</p>
              </div>
              
              <div class="overview-section" style="margin-bottom: 24px; padding-bottom: 24px; border-bottom: 1px solid ${isDark ? 'rgba(75, 85, 99, 0.5)' : 'rgba(0, 0, 0, 0.1)'};">
                <h3 style="font-size: 18px; font-weight: 600; margin-bottom: 12px; color: ${isDark ? 'rgb(243, 244, 246)' : '#2c3e50'};">⭐ Key Features</h3>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px;">
                  <ul style="margin: 0; padding-left: 20px;">
                    ${leftFeaturesCol1.map(feature => `<li style="font-size: 13px; line-height: 1.8; color: ${isDark ? 'rgb(209, 213, 219)' : '#34495e'}; margin-bottom: 6px;">${feature}</li>`).join('')}
                  </ul>
                  <ul style="margin: 0; padding-left: 20px;">
                    ${leftFeaturesCol2.map(feature => `<li style="font-size: 13px; line-height: 1.8; color: ${isDark ? 'rgb(209, 213, 219)' : '#34495e'}; margin-bottom: 6px;">${feature}</li>`).join('')}
                  </ul>
                </div>
              </div>
              
              <div class="overview-section" style="margin-bottom: 24px; padding-bottom: 24px; border-bottom: 1px solid ${isDark ? 'rgba(75, 85, 99, 0.5)' : 'rgba(0, 0, 0, 0.1)'};">
                <h3 style="font-size: 18px; font-weight: 600; margin-bottom: 12px; color: ${isDark ? 'rgb(243, 244, 246)' : '#2c3e50'};">✅ Strengths</h3>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px;">
                  <ul class="pros-list" style="margin: 0; padding-left: 20px; list-style: none;">
                    ${leftProsCol1.map(pro => `<li style="font-size: 13px; line-height: 1.8; color: ${isDark ? 'rgb(209, 213, 219)' : '#34495e'}; margin-bottom: 6px;">✓ ${pro}</li>`).join('')}
                  </ul>
                  <ul class="pros-list" style="margin: 0; padding-left: 20px; list-style: none;">
                    ${leftProsCol2.map(pro => `<li style="font-size: 13px; line-height: 1.8; color: ${isDark ? 'rgb(209, 213, 219)' : '#34495e'}; margin-bottom: 6px;">✓ ${pro}</li>`).join('')}
                  </ul>
                </div>
              </div>
              
              <div class="overview-section" style="margin-bottom: 0;">
                <h3 style="font-size: 18px; font-weight: 600; margin-bottom: 12px; color: ${isDark ? 'rgb(243, 244, 246)' : '#2c3e50'};">⚠️ Considerations</h3>
                <ul class="cons-list" style="margin-left: 20px; margin-top: 0; margin-bottom: 0; list-style: none;">
                  ${leftConfig.cons.map(con => `<li style="font-size: 14px; line-height: 1.8; color: ${isDark ? 'rgb(209, 213, 219)' : '#34495e'}; margin-bottom: 4px;">⚠ ${con}</li>`).join('')}
                </ul>
              </div>
            </div>
            
            <div class="language-overview" style="background: ${isDark ? 'rgb(31, 41, 55)' : '#f8f9fa'}; border-radius: 8px; padding: 24px;">
              <div class="language-header" style="text-align: center; padding-bottom: 16px; margin-bottom: 24px; border-bottom: 4px solid ${rightConfig.color};">
                <h2 style="font-size: 24px; font-weight: 700; color: ${isDark ? 'rgb(243, 244, 246)' : '#2c3e50'}; margin: 0;">${rightConfig.name}</h2>
              </div>
              
              <div class="overview-section" style="margin-bottom: 24px; padding-bottom: 24px; border-bottom: 1px solid ${isDark ? 'rgba(75, 85, 99, 0.5)' : 'rgba(0, 0, 0, 0.1)'};">
                <h3 style="font-size: 18px; font-weight: 600; margin-bottom: 12px; color: ${isDark ? 'rgb(243, 244, 246)' : '#2c3e50'};">📜 History</h3>
                <p style="font-size: 14px; line-height: 1.7; color: ${isDark ? 'rgb(209, 213, 219)' : '#34495e'}; margin: 0;">${rightConfig.history}</p>
              </div>
              
              <div class="overview-section" style="margin-bottom: 24px; padding-bottom: 24px; border-bottom: 1px solid ${isDark ? 'rgba(75, 85, 99, 0.5)' : 'rgba(0, 0, 0, 0.1)'};">
                <h3 style="font-size: 18px; font-weight: 600; margin-bottom: 12px; color: ${isDark ? 'rgb(243, 244, 246)' : '#2c3e50'};">⭐ Key Features</h3>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px;">
                  <ul style="margin: 0; padding-left: 20px;">
                    ${rightFeaturesCol1.map(feature => `<li style="font-size: 13px; line-height: 1.8; color: ${isDark ? 'rgb(209, 213, 219)' : '#34495e'}; margin-bottom: 6px;">${feature}</li>`).join('')}
                  </ul>
                  <ul style="margin: 0; padding-left: 20px;">
                    ${rightFeaturesCol2.map(feature => `<li style="font-size: 13px; line-height: 1.8; color: ${isDark ? 'rgb(209, 213, 219)' : '#34495e'}; margin-bottom: 6px;">${feature}</li>`).join('')}
                  </ul>
                </div>
              </div>
              
              <div class="overview-section" style="margin-bottom: 24px; padding-bottom: 24px; border-bottom: 1px solid ${isDark ? 'rgba(75, 85, 99, 0.5)' : 'rgba(0, 0, 0, 0.1)'};">
                <h3 style="font-size: 18px; font-weight: 600; margin-bottom: 12px; color: ${isDark ? 'rgb(243, 244, 246)' : '#2c3e50'};">✅ Strengths</h3>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px;">
                  <ul class="pros-list" style="margin: 0; padding-left: 20px; list-style: none;">
                    ${rightProsCol1.map(pro => `<li style="font-size: 13px; line-height: 1.8; color: ${isDark ? 'rgb(209, 213, 219)' : '#34495e'}; margin-bottom: 6px;">✓ ${pro}</li>`).join('')}
                  </ul>
                  <ul class="pros-list" style="margin: 0; padding-left: 20px; list-style: none;">
                    ${rightProsCol2.map(pro => `<li style="font-size: 13px; line-height: 1.8; color: ${isDark ? 'rgb(209, 213, 219)' : '#34495e'}; margin-bottom: 6px;">✓ ${pro}</li>`).join('')}
                  </ul>
                </div>
              </div>
              
              <div class="overview-section" style="margin-bottom: 0;">
                <h3 style="font-size: 18px; font-weight: 600; margin-bottom: 12px; color: ${isDark ? 'rgb(243, 244, 246)' : '#2c3e50'};">⚠️ Considerations</h3>
                <ul class="cons-list" style="margin-left: 20px; margin-top: 0; margin-bottom: 0; list-style: none;">
                  ${rightConfig.cons.map(con => `<li style="font-size: 14px; line-height: 1.8; color: ${isDark ? 'rgb(209, 213, 219)' : '#34495e'}; margin-bottom: 4px;">⚠ ${con}</li>`).join('')}
                </ul>
              </div>
            </div>
          </div>
          
          ${leftWhenToUse && rightWhenToUse ? `
            <div class="when-to-use-section" style="margin-top: 32px;">
              <h2 style="font-size: 24px; font-weight: 700; text-align: center; margin-bottom: 24px; color: ${isDark ? 'rgb(243, 244, 246)' : '#2c3e50'};">🤔 Which Should You Choose?</h2>
              <div class="when-to-use-grid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 24px;">
                <div class="when-to-use-card" style="background: ${isDark ? 'rgb(31, 41, 55)' : '#f8f9fa'}; padding: 20px; border-radius: 8px; border-left: 4px solid ${leftConfig.color};">
                  <h3 style="font-size: 18px; font-weight: 600; margin-bottom: 16px; color: ${isDark ? 'rgb(243, 244, 246)' : '#2c3e50'}; margin-top: 0;">Choose ${leftConfig.name} When...</h3>
                  <div style="display: flex; flex-direction: column; gap: 8px;">
                    ${leftWhenToUse.split(',').map(point => `<div style="font-size: 14px; line-height: 1.6; color: ${isDark ? 'rgb(209, 213, 219)' : '#34495e'}; padding-left: 16px; position: relative;">
                      <span style="position: absolute; left: 0; color: ${leftConfig.color};">•</span>
                      ${point.trim()}
                    </div>`).join('')}
                  </div>
                </div>
                <div class="when-to-use-card" style="background: ${isDark ? 'rgb(31, 41, 55)' : '#f8f9fa'}; padding: 20px; border-radius: 8px; border-left: 4px solid ${rightConfig.color};">
                  <h3 style="font-size: 18px; font-weight: 600; margin-bottom: 16px; color: ${isDark ? 'rgb(243, 244, 246)' : '#2c3e50'}; margin-top: 0;">Choose ${rightConfig.name} When...</h3>
                  <div style="display: flex; flex-direction: column; gap: 8px;">
                    ${rightWhenToUse.split(',').map(point => `<div style="font-size: 14px; line-height: 1.6; color: ${isDark ? 'rgb(209, 213, 219)' : '#34495e'}; padding-left: 16px; position: relative;">
                      <span style="position: absolute; left: 0; color: ${rightConfig.color};">•</span>
                      ${point.trim()}
                    </div>`).join('')}
                  </div>
                </div>
              </div>
            </div>
          ` : ''}
        </div>
      `;
    }

    function renderComparison(sectionId, leftLang, rightLang) {
      // Special handling for overview section
      if (sectionId === 'overview') {
        return renderOverview(leftLang, rightLang);
      }
      
      const metadata = getSectionMetadata(sectionId);
      const leftConfig = getLanguageConfig(leftLang);
      const rightConfig = getLanguageConfig(rightLang);
      const comparison = getComparison(sectionId, leftLang, rightLang);

      const leftSnippet = leftConfig?.snippets?.[sectionId] || '// No snippet available';
      const rightSnippet = rightConfig?.snippets?.[sectionId] || '// No snippet available';

      // Check if dark mode is active
      const isDark = document.documentElement.classList.contains('dark');
      
      // Split the "why" text into sentences
      const whySentences = comparison.why
        ? comparison.why.split('.').map(s => s.trim()).filter(s => s.length > 0)
        : [];
      
      return `
        <div class="comparison-card" style="background: ${isDark ? 'rgb(17, 24, 39)' : 'white'}; color: ${isDark ? 'rgb(243, 244, 246)' : '#2c3e50'}; border-radius: 12px; padding: 32px; margin-bottom: 32px; box-shadow: 0 2px 8px rgba(0,0,0,${isDark ? '0.3' : '0.08'});">
          <div class="comparison-header" style="margin-bottom: 24px;">
            <h2 style="font-size: 28px; margin-bottom: 12px; color: ${isDark ? 'rgb(243, 244, 246)' : '#2c3e50'};">
              <span style="color: ${leftConfig.color};">${leftConfig.name}</span> vs <span style="color: ${rightConfig.color};">${rightConfig.name}</span> - ${metadata?.title || sectionId}
            </h2>
            <p class="description" style="font-size: 16px; line-height: 1.6; color: ${isDark ? 'rgb(156, 163, 175)' : '#7f8c8d'};">${comparison?.description || ''}</p>
          </div>
          
          ${whySentences.length > 0 ? `
            <div class="nutshell-section" style="background: ${isDark ? 'rgba(59, 130, 246, 0.1)' : '#ecf7ff'}; border-left: 4px solid ${isDark ? 'rgb(59, 130, 246)' : '#3498db'}; padding: 16px 20px; margin: 0 0 24px 0; border-radius: 4px;">
              <h3 style="font-size: 16px; margin-bottom: 12px; color: ${isDark ? 'rgb(96, 165, 250)' : '#2980b9'};">💡 In a Nutshell...</h3>
              <div style="display: flex; flex-direction: column; gap: 8px;">
                ${whySentences.map(sentence => `<div style="line-height: 1.6; font-size: 15px; color: ${isDark ? 'rgb(209, 213, 219)' : '#34495e'};">• ${sentence}.</div>`).join('')}
              </div>
            </div>
          ` : ''}
          
          <div class="code-comparison" style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 24px 0; width: 100%;">
            <div class="code-panel" style="border-radius: 8px; overflow: hidden; border: 1px solid #e1e8ed; min-width: 0;">
              <div class="code-header" style="background: ${leftConfig.color}; padding: 12px 16px; font-weight: 600; font-size: 14px; display: flex; align-items: center; gap: 8px; color: white;">
                <svg class="icon" viewBox="0 0 24 24" fill="currentColor" style="width: 16px; height: 16px; min-width: 16px; max-width: 16px; flex-shrink: 0;">
                  <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/>
                </svg>
                ${leftConfig.name}
              </div>
              <div class="code-content" style="background: ${isDark ? 'rgb(31, 41, 55)' : '#f8f9fa'}; padding: 20px; overflow-x: auto;">
                <pre style="font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace; font-size: 14px; line-height: 1.6; color: ${isDark ? 'rgb(229, 231, 235)' : '#2c3e50'}; margin: 0; white-space: pre-wrap; word-wrap: break-word;">${escapeHtml(leftSnippet)}</pre>
              </div>
            </div>
            
            <div class="code-panel" style="border-radius: 8px; overflow: hidden; border: 1px solid #e1e8ed; min-width: 0;">
              <div class="code-header" style="background: ${rightConfig.color}; padding: 12px 16px; font-weight: 600; font-size: 14px; display: flex; align-items: center; gap: 8px; color: white;">
                <svg class="icon" viewBox="0 0 24 24" fill="currentColor" style="width: 16px; height: 16px; min-width: 16px; max-width: 16px; flex-shrink: 0;">
                  <path d="M12 2l9 9-9 9-9-9 9-9z"/>
                </svg>
                ${rightConfig.name}
              </div>
              <div class="code-content" style="background: ${isDark ? 'rgb(31, 41, 55)' : '#f8f9fa'}; padding: 20px; overflow-x: auto;">
                <pre style="font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace; font-size: 14px; line-height: 1.6; color: ${isDark ? 'rgb(229, 231, 235)' : '#2c3e50'}; margin: 0; white-space: pre-wrap; word-wrap: break-word;">${escapeHtml(rightSnippet)}</pre>
              </div>
            </div>
          </div>
          
          ${comparison.keyPoints.length > 0 ? `
            <div class="key-points" style="background: ${isDark ? 'rgba(245, 158, 11, 0.1)' : '#fff9e6'}; border-left: 4px solid ${isDark ? 'rgb(251, 191, 36)' : '#f39c12'}; padding: 16px 20px; margin: 24px 0; border-radius: 4px;">
              <h3 style="font-size: 16px; margin-bottom: 12px; color: ${isDark ? 'rgb(251, 191, 36)' : '#e67e22'};">🎯 Key Takeaways</h3>
              <ul style="margin-left: 20px;">
                ${comparison.keyPoints.map(point => `<li style="line-height: 1.8; font-size: 15px; color: ${isDark ? 'rgb(209, 213, 219)' : '#34495e'};">${point}</li>`).join('')}
              </ul>
            </div>
          ` : ''}
        </div>
      `;
    }

    function loadSection(sectionId, addToHistoryFlag = true) {
      currentSection = sectionId;
      const contentWrapper = document.getElementById('main-content');
      const scrollContainer = document.querySelector('.main-content');
      contentWrapper.innerHTML = renderComparison(sectionId, currentLeftLang, currentRightLang);
      if (scrollContainer) {
        scrollContainer.scrollTop = 0;
      }
      
      // Update active nav item
      document.querySelectorAll('.nav-item').forEach(item => {
        item.classList.remove('active');
      });
      const activeItem = document.querySelector(`[data-section="${sectionId}"]`);
      if (activeItem) {
        activeItem.classList.add('active');
      }
      
      // Add to browser history
      if (addToHistoryFlag) {
        addSectionToHistory(sectionId);
      }
    }

    function updateLanguages() {
      loadSection(currentSection, false); // Don't add to history here
      addToHistory(currentLeftLang, currentRightLang, currentSection);
    }

    // Initialize immediately - Astro loads scripts after DOM is ready
    // Navigation items
    document.querySelectorAll('.nav-item').forEach(item => {
      item.addEventListener('click', () => {
        const section = item.getAttribute('data-section');
        loadSection(section);
      });
    });

    // Language selectors
    const leftSelect = document.getElementById('leftLang');
    const rightSelect = document.getElementById('rightLang');

    if (leftSelect) {
      leftSelect.addEventListener('change', (e) => {
        const newLeft = e.target.value;
        // Prevent selecting the same language on both sides
        if (newLeft === currentRightLang) {
          alert(`Cannot select ${getLanguageConfig(newLeft).name} on both sides. Please choose different languages.`);
          leftSelect.value = currentLeftLang;
          return;
        }
        currentLeftLang = newLeft;
        updateLanguages();
      });
    }

    if (rightSelect) {
      rightSelect.addEventListener('change', (e) => {
        const newRight = e.target.value;
        // Prevent selecting the same language on both sides
        if (newRight === currentLeftLang) {
          alert(`Cannot select ${getLanguageConfig(newRight).name} on both sides. Please choose different languages.`);
          rightSelect.value = currentRightLang;
          return;
        }
        currentRightLang = newRight;
        updateLanguages();
      });
    }

    // Handle browser back/forward buttons
    window.addEventListener('popstate', (event) => {
      if (event.state && event.state.leftLang && event.state.rightLang) {
        currentLeftLang = event.state.leftLang;
        currentRightLang = event.state.rightLang;
        currentSection = event.state.section || 'overview';
        
        // Update the select elements
        if (leftSelect) leftSelect.value = currentLeftLang;
        if (rightSelect) rightSelect.value = currentRightLang;
        
        // Update page title
        updatePageTitle(currentLeftLang, currentRightLang, currentSection);
        
        // Reload the content (don't add to history again)
        loadSection(currentSection, false);
      }
    });

    // Check URL parameters on page load
    const urlParams = new URLSearchParams(window.location.search);
    const urlLeft = urlParams.get('left');
    const urlRight = urlParams.get('right');
    const urlSection = urlParams.get('section');
    
    if (urlLeft && urlRight && urlLeft !== urlRight) {
      // Validate that both languages exist
      const leftExists = window.languageData.languages[urlLeft];
      const rightExists = window.languageData.languages[urlRight];
      
      if (leftExists && rightExists) {
        currentLeftLang = urlLeft;
        currentRightLang = urlRight;
        
        // Check if section parameter is valid
        if (urlSection) {
          const sectionExists = getSectionMetadata(urlSection);
          if (sectionExists || urlSection === 'overview') {
            currentSection = urlSection;
          }
        }
        
        // Update the select elements
        if (leftSelect) leftSelect.value = currentLeftLang;
        if (rightSelect) rightSelect.value = currentRightLang;
        
        // Update page title
        updatePageTitle(currentLeftLang, currentRightLang, currentSection);
        
        // Reload with URL parameters (don't add to history)
        loadSection(currentSection, false);
        
        // Replace initial history entry with correct state
        window.history.replaceState(
          { leftLang: currentLeftLang, rightLang: currentRightLang, section: currentSection },
          '',
          window.location.href
        );
      } else {
        // Invalid parameters, initialize with defaults
        addToHistory(currentLeftLang, currentRightLang, currentSection);
      }
    } else {
      // No URL parameters or invalid, initialize with defaults
      addToHistory(currentLeftLang, currentRightLang, currentSection);
    }

    // Maximize/Minimize functionality
    const maximizeBtn = document.getElementById('maximize-btn');
    const showdownContainer = document.getElementById('showdown-container');
    const maximizeIcon = document.getElementById('maximize-icon');
    const minimizeIcon = document.getElementById('minimize-icon');
    
    // Check localStorage for saved preference
    const isMaximized = localStorage.getItem('showdown-maximized') === 'true';
    
    function setMaximized(maximized) {
      if (maximized) {
        showdownContainer.classList.remove('container', 'mx-auto', 'px-4');
        showdownContainer.classList.add('w-full');
        maximizeIcon.classList.add('hidden');
        minimizeIcon.classList.remove('hidden');
        localStorage.setItem('showdown-maximized', 'true');
      } else {
        showdownContainer.classList.remove('w-full');
        showdownContainer.classList.add('container', 'mx-auto', 'px-4');
        maximizeIcon.classList.remove('hidden');
        minimizeIcon.classList.add('hidden');
        localStorage.setItem('showdown-maximized', 'false');
      }
    }
    
    // Apply saved preference on load
    if (isMaximized) {
      setMaximized(true);
    }
    
    // Toggle on button click
    if (maximizeBtn) {
      maximizeBtn.addEventListener('click', () => {
        const currentlyMaximized = showdownContainer.classList.contains('w-full');
        setMaximized(!currentlyMaximized);
      });
    }
  </script>

  <style>
    .showdown-wrapper {
      padding-top: 8rem; /* 128px - pt-32 */
      padding-bottom: 4rem; /* 64px - pb-16 */
      background: #f8f9fa;
    }

    :global(.dark) .showdown-wrapper {
      background: rgb(3, 7, 18);
    }

    .language-showdown-container {
      display: flex;
      min-height: calc(100vh - 256px); /* Account for navigation and padding */
      overflow: hidden;
      background: white;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    }
    
    :global(.dark) .language-showdown-container {
      background: rgb(17, 24, 39); /* dark:bg-gray-900 */
      box-shadow: 0 2px 8px rgba(0,0,0,0.3);
    }

    .sidebar {
      width: 280px;
      background: #e9ecef;
      color: #2c3e50;
      overflow-y: auto;
      box-shadow: 2px 0 10px rgba(0,0,0,0.1);
      border-top-left-radius: 12px;
      border-bottom-left-radius: 12px;
    }
    
    :global(.dark) .sidebar {
      background: #1a252f;
      color: white;
    }

    .sidebar-header {
      padding: 24px 20px;
      background: #d3d9df;
      border-bottom: 1px solid #adb5bd;
      border-top-left-radius: 12px;
    }

    :global(.dark) .sidebar-header {
      background: #1a252f;
      border-bottom-color: #34495e;
    }

    .sidebar-header h1 {
      font-size: 20px;
      margin-bottom: 16px;
      color: #2563eb;
    }

    :global(.dark) .sidebar-header h1 {
      color: #3498db;
    }

    .maximize-button {
      position: absolute;
      top: 7px;
      right: 7px;
      background: white;
      border: 1px solid #dee2e6;
      border-radius: 6px;
      padding: 6px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s;
      color: #6c757d;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
      z-index: 10;
    }

    :global(.dark) .maximize-button {
      background: rgb(31, 41, 55);
      border-color: rgb(55, 65, 81);
      color: #95a5a6;
    }

    .maximize-button:hover {
      background: #f8f9fa;
      border-color: #2563eb;
      color: #2563eb;
      transform: scale(1.05);
    }

    :global(.dark) .maximize-button:hover {
      background: rgb(55, 65, 81);
      border-color: #3498db;
      color: #3498db;
    }

    .maximize-button .icon-svg {
      width: 18px;
      height: 18px;
    }

    .language-selectors {
      display: flex;
      flex-direction: column;
      gap: 8px;
      align-items: center;
    }

    .language-select {
      width: 100%;
      padding: 8px;
      border-radius: 4px;
      border: 1px solid #adb5bd;
      background: white;
      color: #2c3e50;
      font-size: 14px;
      cursor: pointer;
    }

    :global(.dark) .language-select {
      border-color: #34495e;
      background: #34495e;
      color: white;
    }

    .language-select:hover {
      background: #f8f9fa;
    }

    :global(.dark) .language-select:hover {
      background: #3f5266;
    }

    .vs {
      color: #6c757d;
      font-size: 12px;
      font-weight: 600;
    }

    :global(.dark) .vs {
      color: #95a5a6;
    }

    .nav-section {
      padding: 16px 0;
      border-bottom: 1px solid #ced4da;
    }

    :global(.dark) .nav-section {
      border-bottom-color: #34495e;
    }

    .nav-section-title {
      padding: 8px 20px;
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 1px;
      color: #6c757d;
      font-weight: 600;
    }

    :global(.dark) .nav-section-title {
      color: #95a5a6;
    }

    .nav-item {
      padding: 12px 20px;
      cursor: pointer;
      transition: all 0.2s;
      border-left: 3px solid transparent;
      font-size: 14px;
    }

    .nav-item:hover {
      background: #d3d9df;
      border-left-color: #2563eb;
    }

    :global(.dark) .nav-item:hover {
      background: #34495e;
      border-left-color: #3498db;
    }

    .nav-item.active {
      background: #d3d9df;
      border-left-color: #2563eb;
      color: #2563eb;
    }

    :global(.dark) .nav-item.active {
      background: #34495e;
      border-left-color: #3498db;
      color: #3498db;
    }

    .main-content {
      flex: 1;
      overflow-y: auto;
      padding: 40px;
      background: #f8f9fa;
      border-top-right-radius: 12px;
      border-bottom-right-radius: 12px;
      position: relative;
    }
    
    :global(.dark) .main-content {
      background: rgb(17, 24, 39); /* dark:bg-gray-900 */
    }

    #main-content {
      /* Content wrapper - no special styling, just a container for dynamic content */
    }

    .comparison-card {
      background: white;
      border-radius: 12px;
      padding: 32px;
      margin-bottom: 32px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
      color: #2c3e50;
    }
    
    :global(.dark) .comparison-card {
      background: rgb(31, 41, 55); /* dark:bg-gray-800 - slightly lighter for contrast */
      color: rgb(243, 244, 246); /* dark:text-gray-100 */
      box-shadow: 0 2px 8px rgba(0,0,0,0.3);
    }

    .comparison-header {
      margin-bottom: 24px;
    }

    .comparison-header h2 {
      font-size: 28px;
      color: #2c3e50;
      margin-bottom: 12px;
    }
    
    :global(.dark) .comparison-header h2 {
      color: rgb(243, 244, 246);
    }

    .comparison-header .description {
      font-size: 16px;
      color: #7f8c8d;
      line-height: 1.6;
    }
    
    :global(.dark) .comparison-header .description {
      color: rgb(156, 163, 175); /* dark:text-gray-400 */
    }

    .nutshell-section {
      background: #ecf7ff;
      border-left: 4px solid #3498db;
      padding: 16px 20px;
      margin: 0 0 24px 0;
      border-radius: 4px;
    }
    
    :global(.dark) .nutshell-section {
      background: rgba(59, 130, 246, 0.1); /* dark blue tint */
      border-left-color: rgb(59, 130, 246);
    }

    .nutshell-section h3 {
      color: #2980b9;
      font-size: 16px;
      margin-bottom: 12px;
    }
    
    :global(.dark) .nutshell-section h3 {
      color: rgb(96, 165, 250); /* lighter blue for dark mode */
    }

    .nutshell-section div {
      color: #34495e;
      line-height: 1.6;
      font-size: 15px;
    }
    
    :global(.dark) .nutshell-section div {
      color: rgb(209, 213, 219); /* dark:text-gray-300 */
    }

    .code-comparison {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin: 24px 0;
      width: 100%;
    }

    .code-panel {
      border-radius: 8px;
      overflow: hidden;
      border: 1px solid #e1e8ed;
      min-width: 0; /* Allow grid items to shrink below content size */
    }

    .code-header {
      padding: 12px 16px;
      font-weight: 600;
      font-size: 14px;
      display: flex;
      align-items: center;
      gap: 8px;
      color: white;
    }

    .code-header .icon {
      width: 16px;
      height: 16px;
      flex-shrink: 0;
    }
    
    /* Ensure SVG icons don't expand */
    .code-header svg {
      width: 16px;
      height: 16px;
      min-width: 16px;
      min-height: 16px;
      max-width: 16px;
      max-height: 16px;
    }

    .code-content {
      background: #f1f3f5;
      padding: 20px;
      overflow-x: auto;
    }
    
    :global(.dark) .code-content {
      background: rgb(17, 24, 39); /* dark:bg-gray-900 */
    }

    .code-content pre {
      font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
      font-size: 14px;
      line-height: 1.6;
      color: #2c3e50;
      margin: 0;
      white-space: pre-wrap;
      word-wrap: break-word;
    }
    
    :global(.dark) .code-content pre {
      color: rgb(229, 231, 235); /* dark:text-gray-200 */
    }

    .key-points {
      background: #fff9e6;
      border-left: 4px solid #f39c12;
      padding: 16px 20px;
      margin: 24px 0;
      border-radius: 4px;
    }
    
    :global(.dark) .key-points {
      background: rgba(245, 158, 11, 0.1); /* dark amber tint */
      border-left-color: rgb(251, 191, 36);
    }

    .key-points h3 {
      color: #e67e22;
      font-size: 16px;
      margin-bottom: 12px;
    }
    
    :global(.dark) .key-points h3 {
      color: rgb(251, 191, 36); /* lighter amber for dark mode */
    }

    .key-points ul {
      margin-left: 20px;
    }

    .key-points li {
      color: #34495e;
      line-height: 1.8;
      font-size: 15px;
    }
    
    :global(.dark) .key-points li {
      color: rgb(209, 213, 219); /* dark:text-gray-300 */
    }

    @media (max-width: 968px) {
      .code-comparison {
        grid-template-columns: 1fr;
      }

      .sidebar {
        width: 240px;
      }
    }

    ::-webkit-scrollbar {
      width: 10px;
      height: 10px;
    }

    ::-webkit-scrollbar-track {
      background: #e9ecef;
    }

    :global(.dark) ::-webkit-scrollbar-track {
      background: #1a252f;
    }

    ::-webkit-scrollbar-thumb {
      background: #adb5bd;
      border-radius: 5px;
    }

    :global(.dark) ::-webkit-scrollbar-thumb {
      background: #95a5a6;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: #868e96;
    }

    :global(.dark) ::-webkit-scrollbar-thumb:hover {
      background: #7f8c8d;
    }
    
    /* Overview section styles */
    .overview-card {
      background: white;
      border-radius: 12px;
      padding: 40px;
      margin-bottom: 32px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    }
    
    :global(.dark) .overview-card {
      background: rgb(31, 41, 55); /* dark:bg-gray-800 */
      box-shadow: 0 2px 8px rgba(0,0,0,0.3);
    }
    
    .overview-title {
      font-size: 32px;
      font-weight: 700;
      text-align: center;
      margin-bottom: 24px;
      color: #2c3e50;
    }
    
    :global(.dark) .overview-title {
      color: rgb(243, 244, 246);
    }
    
    .overview-summary {
      background: rgba(52, 152, 219, 0.05);
      border-left: 4px solid #3498db;
      padding: 20px;
      margin-bottom: 32px;
      border-radius: 4px;
    }
    
    :global(.dark) .overview-summary {
      background: rgba(59, 130, 246, 0.1);
      border-left-color: rgb(59, 130, 246);
    }
    
    .overview-summary p {
      font-size: 16px;
      line-height: 1.8;
      color: #34495e;
    }
    
    :global(.dark) .overview-summary p {
      color: rgb(209, 213, 219);
    }
    
    .languages-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 32px;
      margin-bottom: 32px;
    }
    
    @media (max-width: 968px) {
      .languages-grid {
        grid-template-columns: 1fr;
      }
    }
    
    .language-overview {
      background: #f1f3f5;
      border-radius: 8px;
      padding: 24px;
    }
    
    :global(.dark) .language-overview {
      background: rgb(17, 24, 39); /* dark:bg-gray-900 - darker for better contrast */
    }
    
    .language-header {
      text-align: center;
      padding-bottom: 16px;
      margin-bottom: 24px;
    }
    
    .language-header h2 {
      font-size: 24px;
      font-weight: 700;
      color: #2c3e50;
    }
    
    :global(.dark) .language-header h2 {
      color: rgb(243, 244, 246);
    }
    
    .overview-section {
      margin-bottom: 24px;
    }
    
    .overview-section h3 {
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 12px;
      color: #2c3e50;
    }
    
    :global(.dark) .overview-section h3 {
      color: rgb(243, 244, 246);
    }
    
    .overview-section p {
      font-size: 14px;
      line-height: 1.7;
      color: #34495e;
    }
    
    :global(.dark) .overview-section p {
      color: rgb(209, 213, 219);
    }
    
    .overview-section ul {
      margin-left: 20px;
    }
    
    .overview-section li {
      font-size: 14px;
      line-height: 1.8;
      color: #34495e;
      margin-bottom: 4px;
    }
    
    :global(.dark) .overview-section li {
      color: rgb(209, 213, 219);
    }
    
    .pros-list li::marker {
      content: "✓ ";
      color: #27ae60;
      font-weight: bold;
    }
    
    .cons-list li::marker {
      content: "⚠ ";
      color: #e67e22;
      font-weight: bold;
    }
    
    .when-to-use-section {
      margin-top: 32px;
    }
    
    .when-to-use-section h2 {
      font-size: 24px;
      font-weight: 700;
      text-align: center;
      margin-bottom: 24px;
      color: #2c3e50;
    }
    
    :global(.dark) .when-to-use-section h2 {
      color: rgb(243, 244, 246);
    }
    
    .when-to-use-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 24px;
    }
    
    @media (max-width: 968px) {
      .when-to-use-grid {
        grid-template-columns: 1fr;
      }
    }
    
    .when-to-use-card {
      background: #f1f3f5;
      padding: 20px;
      border-radius: 8px;
    }
    
    :global(.dark) .when-to-use-card {
      background: rgb(17, 24, 39); /* dark:bg-gray-900 */
    }
    
    .when-to-use-card h3 {
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 12px;
      color: #2c3e50;
    }
    
    :global(.dark) .when-to-use-card h3 {
      color: rgb(243, 244, 246);
    }
    
    .when-to-use-card p {
      font-size: 14px;
      line-height: 1.7;
      color: #34495e;
    }
    
    :global(.dark) .when-to-use-card p {
      color: rgb(209, 213, 219);
    }
  </style>
</Layout>

